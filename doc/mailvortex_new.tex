\documentclass[10pt,a4paper,appendixprefix,twocolumn,draft]{scrbook}

\usepackage{svn}
\SVN $Revision: 295 $
\SVN $Author: mgwerder $
\SVN $Date: 2016-06-14 18:30:29 +0200 (Di, 14 Jun 2016) $
\SVN $URL: https://qetesh.gwerder.net/svn/mailvortex/doc/mailvortex.tex $
\SVN $Id: mailvortex.tex 295 2016-06-14 16:30:29Z mgwerder $

\author{Martin Gwerder (06-073-787)}
\date{\SVNDate}

% enable graphics inclusion
\usepackage[final]{graphicx}

\usepackage{pdfsync} 

\usepackage{MnSymbol} % required for the arrow

%\usepackage{underscore}

% titlepage geometry change
\usepackage[paper=a4paper,top=2cm,bottom=2cm,inner=2cm,outer=2cm]{geometry}% http://ctan.org/pkg/geometry

\usepackage{scrhack}

\usepackage[autocite=superscript,
            backref=true,
            backend=bibtex,
            %bibstyle=AnonMail,
            hyperref=true,
            url=true,
            isbn=true,
            maxcitenames=3,
            maxbibnames=100,
            block=none,
            sorting=anyt]{biblatex}

%\bibstyle{alphadin}
\addbibresource{mailvortex}
\addbibresource{inc/bib/unclassified/Anonbib/anonbib}
\usepackage{csquotes}

% For Multipage listing in appendix
\usepackage[final]{listings}
\usepackage{caption}
\usepackage[framemethod=tikz]{mdframed}
\usepackage[many]{tcolorbox}
\tcbuselibrary{listings}

% enable raggedright in tables
\usepackage{array}
% for diagonal divided cells in tables
\usepackage{makecell}
\renewcommand\theadfont{\bfseries}

% footnotes for tables
\usepackage{tablefootnote}
%\makesavenoteenv{tabular}

% enable placement of floating images
\usepackage{float}

%enable page spanning tables
\usepackage{supertabular}

%enable hypelinks
\usepackage[pdftex,pdfusetitle]{hyperref}
\hypersetup{
	hidelinks,
  pdfpagelayout=TwoPageRight,
%	bookmarks=true,
  pdfstartview=Fit
}

% Link above tables and figures
%\usepackage[hypcap]{caption}

% support repetitive footnotes
\usepackage{fixfoot}

% Document annotations
\usepackage[nomargin]{fixme}
\fxuselayouts{pdfnote}

%enable attached files
\usepackage{attachfile}

%enable word separation
\usepackage[english]{babel}

% enable nice references
\usepackage{fancyref}

% enable superscript  for 1st, 2nd, 3rd etc.
\usepackage[super]{nth}

% Enable indexes
\usepackage{makeidx}
\makeindex 

% format appendix
\usepackage[titletoc,page,title]{appendix} %enable appendix 

% set numbering for subsubsections
\usepackage{tocstyle}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{4}

% Sans serif font for the whole document
\renewcommand{\familydefault}{\sfdefault}
\usepackage[T1]{fontenc}
\usepackage{times}

\usepackage{amsmath}

% No paragraph indentation
\setlength\parindent{0pt} 
\setlength\parskip{6pt} 

% For coments and similar
\usepackage{verbatim}

% For Page background color
\usepackage{afterpage}
\usepackage{xcolor} 

% Required for definitions environment
\usepackage{hanging}
\usepackage{ragged2e}
\newenvironment{entry}{\par\leavevmode\hangpara{1.5mm}{1}\ignorespaces}{\RaggedRight\par}
\newcommand*{\mainentry}[2]{{\bfseries{#1\label{def:#1}}}~#2\par}
\newcommand*{\subentry}[2]{\par~\begin{tabular}{p{\textwidth-.6cm}@{}}{\bfseries{\itshape{#1\label{def:#1}}}}~#2\end{tabular}}

\newcommand*{\defref}[1]{\hyperref[def:#1]{#1}}
\title{MessageVortex}
\subtitle{Transport Independent Messaging anonymous to \nth{3} Parties}
\author{Martin Gwerder (06-073-787)}
\date{\SVNDate}

\hypersetup{pdfinfo={
Subject={Privacy when using common internet transport protocols},
Keywords={Email; SMTP; MIME; S/MIME; POP3; IMAPv4; MailVortex; Anonymity}
}}

\lstset{ %
	backgroundcolor=\color{lightgray},   
	language=java,
	frame=single,
	numbers=left,
	numbersep=5pt,
	numberstyle=\tiny,
	basicstyle=\tiny
}

\lstdefinelanguage{ASN1}
{
	morekeywords=[1]{DEFINITIONS,AUTOMATIC,TAGS,BEGIN,END,%
		SEQUENCE,OF,CHOICE,ENUMERATED,NULL,SIZE,OPTIONAL,%
		OCTET,BIT,STRING,INTEGER,REAL,BOOLEAN,WITH,COMPONENTS},%
	commentstyle=\itshape,%
	morecomment=[l]{--},%
	basicstyle=\tiny\sffamily,
}

\lstdefinestyle{BashInputStyle}{
	language={},
	basicstyle=\tiny\sffamily,
	numbers=none,
	frame=tb,
	breaklines=true,
	prebreak={\mbox{\quad$\rhookswarrow$}},
	columns=fullflexible,
	backgroundcolor=\color{gray!20},
%	linewidth=0.9\linewidth,
%	xleftmargin=0.1\linewidth
}

\begin{document}
\newgeometry{margin=0.1cm, footskip=1mm}

\frontmatter

% include title page
\input{inc/parts/title.tex}

\restoregeometry

\begin{comment}
\begin{abstracts}        %this creates the heading for the abstract page
FIXME abstract is still missing
\end{abstracts}

\begin{acknowledgements}      %this creates the heading for the acknowlegments
I would like to thank my wife Cornelia and my lovely three kids (Saphira, Florian and Aurelius) for their patience and their support. Without them I could never have done this work.\par

FIXME Professor\par
FIXME university\par
FIXME family\par

I would like to acknowledge the thousands of individuals who have coded for the LaTeX project for free. It is due to their efforts that we can generate professionally typeset PDFs now.
\end{acknowledgements}
\end{comment}

\cleardoublepage
\makeatletter\renewcommand{\l@subsubsection}{\@dottedtocline{3}{7.4em}{4.5em}}\makeatother
\tableofcontents
\listoftables
\listoffigures

\mainmatter

\input{rewrite-main.tex}

\backmatter
\appendix
\part{Appendix}
\makeatletter
\g@addto@macro\appendix{%
	\renewcommand*{\chapterformat}{%
		{\chapapp\nobreakspace\thechapter\autodot\enskip}%
	}
	\renewcommand*{\chaptermarkformat}{%
		{\chapapp\nobreakspace\thechapter\autodot\enskip}%
	}
	\let\oldaddcontentsline\addcontentsline
	\newcommand\hackedaddcontentsline[3]{\oldaddcontentsline{#1}{#2}{\chapapp\nobreakspace#3}}
	\let\oldchapter\chapter
	\renewcommand*\chapter[1]{%
		\let\addcontentsline\hackedaddcontentsline%
		\oldchapter{#1}%
		\let\addcontentsline\oldaddcontentsline%
	}
}
\makeatother
\onecolumn
\chapter{ASN.1 representation of the protocol\label{app:asnone}}
\lstinputlisting[language=ASN1, caption={ASN.1 representation of the protocol}, backgroundcolor=\color{gray!10}]{../app/asn.1/messageBlocks.asn} 
\twocolumn


\chapter{Glossary}

\begin{entry}
  \mainentry{adverser}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{Agent}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{EWS}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{IMAP}{IMAP (currently IMAPv4) is a typical protocol to be used between a \defref{Client MRA} and a \defref{Remote MDA}. It has been specified in its current version in \cite{RFC3501}. The protocol is capable of fully maintaining a server based message store. This includes the capability of adding, modifying and deleting messages and folders of a mailstore. It does not include however sening mails to other destinations outside the server based store.}
\end{entry}

\begin{entry}
	\mainentry{Item of Interest (IoI)}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{LMTP}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{Local Mail Store}{A Local Mail Store offers a persistent store on a local non volatile memory in which messages are beeing stored. A store may be flat or structured (eg. supports folders). A Local Mail Store may be an authoritative store for mails or a ``Cache Only'' copy. It is typically not a queue.}
\end{entry}

\begin{entry}
  \mainentry{mail server admin}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{MDA}{An MDA provides an uniform access to a \defref{Local Mail Store}.}
  \subentry{Remote MDA}{A Remote MDA is typically supporting a specific access protocol to access the data stored within a \defref{Local Mail Store} .}
  \subentry{Local MDA}{A Local MDA is typically giving local applications access to a server store. This may be done thru an API, a named socket or similar mechanisms.}
\end{entry}

\begin{entry}
  \mainentry{MRA}{A Mail receiving Agent. This agent receives mails from a agent. Depending on the used protocol two subtypes of MRAs are available.}
  \subentry{Client MRA}{A client MRA picks up mails in the server mail storage from a remote MDA. Client MRAs usually connect thru a standard protocol which was designed for client access. Examples for such protocols are \defref{POP} or \defref{IMAP}}
  \subentry{Server MRA}{Unlike a Client MRA a server MRA listens passively for incomming connections and forwardes received Messages to a MTA for delivery and routing. A typical protocol supported by an Server MRA is \defref{SMTP}}
\end{entry}

\begin{entry}
  \mainentry{MS-OXMAPIHTTP}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{MSA}{A Mail Sending Agent. This agent sends mails to a \defref{Server MRA}. }
\end{entry}

\begin{entry}
  \mainentry{MTA}{A Mail Transfer Agent. This transfer agent routes mails between other components. Typically  an MTA receives mails from an MRA and forwardes them to a MDA or MSA. The main task of a MTA is to provide reliable queues and solid track of all mails as long as they are not forwarded to another MTA or local storage.}
\end{entry}

\begin{entry}
  \mainentry{MTS}{A Mail Transfer Service. This is a set of agents which provide the functionallity tor send and receive Messages and forward them to a local or remote store.}
\end{entry}

\begin{entry}
  \mainentry{MSS}{A Mail Storage Service. This is a set of agents providing a reliable store for local mail accounts. It also provides Interfacing which enables clients to access the users mail.}
\end{entry}

\begin{entry}
  \mainentry{MUA}{A Mail User Agent. This user agent reads mails from a local storage and allows a user to read existing mails, create and modify mails.}
\end{entry}

\begin{entry}
  \mainentry{Privacy}{From the Oxford English Dictionary: ``
    \begin{enumerate}
      \item The state or condition of beeing withdrawn from the society of others, or from the public intrest; seclusion. The state or condition of beeing alone, undisturbed, or free from public attention, as a matter of choice or right; freedom from interference or intrusion.
      \item Private or retired place; private apartments; places of retreat.
      \item Absence or avoidance of publicity or display; a condition approaching to secrecy or concealment. Keeping of a secret.
      \item A private matter, a secret; private or personal matters or relations; The private parts.
      \item Intimacy, confidential relations.
      \item The state of being privy to some act.
    \end{enumerate}''\cite[FIXME]{OXFORD}\\
    In this work privacy is related to definition two. Mails should be able to be handled as a virtual private place where no one knows who is talking to whom and about what or how frequent (except for directly involved people).
  }
\end{entry}

\begin{entry}
  \mainentry{POP}{POP (currently in version 3) is a typical protocol to be used between a \defref{Client MRA} and a \defref{Remote MDA}. Unlike \defref{IMAP} it is not able to maintain a mail store. Its sole purpose is to fetch and delete mails in a server based store. Modifying Mails or even handling a complex folder structure is not doable with POP}
\end{entry}

\begin{entry}
  \mainentry{Service}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{SMTP}{SMTP is the most commonly used protocol for sending mails across the internet. In its current version it has been specified in \cite{RFC5321}.}
\end{entry}

\begin{entry}
  \mainentry{Storage}{A store to keep data. It is assumed to be temporary or persistent in its nature.}
\end{entry}

\begin{entry}
  \mainentry{user}{FIXME}
\end{entry}

\begin{entry}
  \mainentry{UBE}{FIXME}
\end{entry}

\chapter{Bibliography}
{
  \renewcommand*{\bibfont}{\small}
  \printbibliography[title={},heading=none]
}

% additional reference entries
\index{Mail transport|see {Message Transport}}

% add the index
\printindex

\begin{comment}
% just a trick to make TexNicCenter Bibliography working
\bibliography{mailvortex}
\bibliography{inc/bib/unclassified/Anonbib/anonbib}
\end{comment}



\begin{comment}
% Some Notes 
http://www.rfc-editor.org/pubprocess.html
RFC2223 Instructions to RFC Authors
RFC2119 BCP14 Key words for use in RFCs to Indicate Requirement Levels
RFC3979 BCP79 Intellectual Property Rights in IETF Technology
RFC5378 BCP78 Rights Contributors Provide to the IETF Trust


http://tex.stackexchange.com/questions/36307/formatting-back-references-in-bibliography
http://www.cs.columbia.edu/irt/software/l2x/ l2x -- conversion from LaTeX to other formats Version 1.13
http://ftp.gwdg.de/pub/ctan/support/l2x/
http://tools.ietf.org/tools/xml2rfc2

http://www.zisc.ethz.ch/events/2003-2011/ISC2006Slides/FederrathZISCTalk.pdf

Professorliste
Dr. Christoph Sprenger (Part I)
-Prof. David Basin
Gregory Demay
Peter Gazi
Dr. Srdjan Marinovic
Dr. Sasa Radomirovic
Dr. Ralf Sasse

T. Hoefler
A. Perrig 
-Dr. Jan Camenisch (Keine Berechtigung)

-Srdjan Capkun (Keine Kapazität)
-David Basin  (Keine Kapazität)
\end{comment}
\end{document}
